<script data-provider="sitecues-proxy" type="application/javascript">
    // This script is for testing any release of sitecues
    // Development script injected via sitecues-proxy
    var sitecues = window.sitecues = window.sitecues || {},
        // We need the major and minor version as a string, e.g. '4.0' from full version number '4.0.13'
        rawVersion = '{{{RAWVERSION}}}',
        releaseSplit = rawVersion.split('.'),
        majorVer = releaseSplit[0],
        minorVer = releaseSplit[1],
        majMinVer = majorVer + '.' + minorVer;  
    sitecues.config = sitecues.config || {};
    sitecues.config.siteId = '{{{SITE_ID}}}';
    sitecues.config.scriptUrl = 'https://js.dev.sitecues.com/l/s;id=' + sitecues.config.siteId + '/release-' + majMinVer + '/' + rawVersion + '-RELEASE/js/sitecues.js';
    sitecues.config.isTester = true;  // Metrics from this user can be filtered out by backend
    // Do not allow the sitecues object to be wiped out or changed to something else,
    // but allow properties to be added to it, e.g. sitecues.$ = jQuery
    Object.defineProperty(window, 'sitecues', { writable: false });
    Object.defineProperty(sitecues, 'config', { writable: false }); // Do not allow reassignment, e.g. sitecues.config = {};
    Object.freeze(sitecues.config); // Do not allow properties of sitecues.config to be changed, e.g. sitecues.config.siteId = 's-xxxx';
    (function () {
        var script = document.createElement('script'),
            first  = document.getElementsByTagName('script')[0];
        script.type  = 'application/javascript';
        script.src   = sitecues.config.scriptUrl;
        script.setAttribute('crossorigin', 'anonymous')
        first.parentNode.insertBefore(script, first);
    })();
</script>
